name: Delete all workflow runs

on:
  workflow_dispatch: # Allows manual trigger from the Actions tab

jobs:
  delete-runs:
    runs-on: ubuntu-latest
    permissions:
      actions: write # Required permission to delete runs
    steps:
      - name: echo workflow
        run: echo "print workflow::" ${{ github.token }}//${{secrets.GITHUB_TOKEN}}//${{ github.repository }}
      # - name: Delete workflow runs
      #   uses: Mattraiano/delete-workflow-runs@v2
      #   with:
      #     token: ${{ github.token }}
      #     repository: ${{ github.repository }}
      #     retain_days: 0
      #     keep_minimum_runs: 0
      
      # - name: Delete workflow runs
      #   uses: Mattraks/delete-workflow-runs@v2
      #   with:
      #     token: ${{ github.token  }}
      #     repository: ${{ github.repository }}
      #     delete_workflow_pattern: '*' # Targets all workflows
      #     dry_run: false # Set to true first to test what will be deleted
      #     keep_minimum_runs: 0 # Deletes all runs

      - name: Delete ALL workflow runs
        uses: proximitymalt/delete-old-workflow-runs@v0.3.0
        with:
          # This deletes everything older than 1 second
          remove-headers: true
          all-runs: true
